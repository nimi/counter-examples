{"version":3,"sources":["../app.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["/**\n* Key value database store\n */\nconst Database = {\n\t_counterValue: 0,\n\n\tget: () => Database._counterValue,\n\n\tupdate: value => Database._counterValue = value\n};\n\n/**\n* Counter model\n */\nclass Model {\n\tconstructor(storage) {\n\t\tthis.storage = storage;\n\t\tthis.ee = new EventEmitter();\n\t}\n\n\tread() {\n\t\treturn this.storage.get();\n\t}\n\n\tupdate(value) {\n\t\tthis.storage.update(value);\n\t\tthis.ee.emit('counterUpdated', value)\n\t}\n}\n\n/**\n* Counter view\n */\nclass View {\n\tconstructor(container, model) {\n\t\tthis.model = model;\n\t\tthis.container = container;\n\t\tthis.appName = 'Vanilla JavaScript (MVC)';\n\t\tthis.incrementButton = 'inc';\n\t\tthis.incButton = () => document.getElementById('inc');\n\t\tthis.decButton = () => document.getElementById('dec');\n\t\tthis.counterTotal = () => document.getElementById('total');\n\n\t\tthis.viewCommands = {\n\t\t\tshowCounter: value => this.container.innerHTML = this.showTemplate(value),\n\t\t\tupdateCounter: value => this.counterTotal().innerHTML = value\n\t\t};\n\n\t\tthis.model.ee.addListener('counterUpdated', value => {\n\t\t\tthis.render('updateCounter', value);\n\t\t});\n\t}\n\n\trender(command, value) {\n\t\tthis.viewCommands[command](value);\n\t}\n\n\tshowTemplate(value) {\n\t\treturn `\n\t\t<h1>${this.appName}</h1>\n\t\t<button id=\"inc\">+</button>\n\t\t<button id=\"dec\">-</button>\n\t\t\t  <div id=\"total\">${value}</div>`;\n\t}\n\n\tbind(event, handler) {\n\n\t\tif (event === 'increment') {\n\t\t\tthis.incButton().addEventListener('click', handler);\n\t\t}\n\n\t\tif (event === 'decrement') {\n\t\t\tthis.decButton().addEventListener('click', handler);\n\t\t}\n\t}\n}\n\n/**\n* Counter view\n */\nclass Controller {\n\tconstructor(model, view) {\n\t\tthis.model = model;\n\t\tthis.view = view;\n\t}\n\n\tinitializeView() {\n\t\tthis.view.render('showCounter', this.model.read());\n\t\tthis._bindEvents();\n\t}\n\n\tincrement() {\n\t\tconst newValue = this.model.read() + 1;\n\t\tthis.model.update(newValue);\n\t}\n\n\tdecrement() {\n\t\tconst newValue = this.model.read() - 1;\n\t\tthis.model.update(newValue);\n\t}\n\n\t_bindEvents() {\n\t\tthis.view.bind('increment', () => this.increment());\n\t\tthis.view.bind('decrement', () => this.decrement());\n\t}\n\n}\n\n/**\n* Counter component\n */\nclass Counter {\n\tconstructor(container) {\n\t\tthis.storage = Database;\n\n\t\tthis.model = new Model(Database);\n\t\tthis.view = new View(container, this.model);\n\t\tthis.controller = new Controller(this.model, this.view);\n\t}\n}\n\n// Intialization\nconst container = document.getElementById('app');\nconst counter = new Counter(container);\nconst initializeView = () => counter.controller.initializeView();\n\nwindow.addEventListener('load', initializeView);\n"]}